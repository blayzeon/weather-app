(()=>{"use strict";const e={data:{lat:"0",lon:"0"},weatherFromPromise(t){e.data.current=t.current,e.data.hourly=t.hourly,e.data.daily=t.daily},async createWeatherPromise(){const t=`https://api.openweathermap.org/data/2.5/onecall?lat=${e.data.lat}&lon=${e.data.lon}&exclude=minutely,alerts&appid=c937e56c43bbfbd7edd24a3aa2b5a7a0`;try{const a=await fetch(t,{mode:"cors"}),n=await a.json();return e.weatherFromPromise(n)}catch(e){return e}},setCoords(t){e.data.lat=t.coords.latitude,e.data.lon=t.coords.longitude,e.createWeatherPromise()},getCoords(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e.setCoords)}},t=e,a={default(e){const t=document.createElement("div");t.setAttribute("id","default-container");const a=document.createElement("h1");a.innerText="Weather App";const n=document.createElement("h4");n.innerText="Created using Geolocation and OpenWeather API";const r=document.createElement("button");r.innerText="Get Location",r.setAttribute("id","geo-button"),t.appendChild(a),t.appendChild(n),t.appendChild(r),e.appendChild(t)},clearNodesFrom(e){for(;e.firstChild;)e.removeChild(e.lastChild)},createCard(e,t,a,n){const r=document.createElement("div");r.classList.add("card");const o=document.createElement("img");o.setAttribute("src",t),o.setAttribute("alt",a);const d=document.createElement("h4");d.innerText=a;const c=document.createElement("p");c.innerHTML=n,r.appendChild(o),r.appendChild(d),r.appendChild(c),e.appendChild(r)}},n=a,r=(new Date).getDay(),o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=document.querySelector("#container");function c(){let e="C";const a=setTimeout(c,3e3);if("0"!==t.data.lat){clearTimeout(a),n.clearNodesFrom(d);const c=document.createElement("button");c.setAttribute("id","controller"),c.innerHTML=`°<span dataletter>${e}</span>`,d.appendChild(c);const i=document.createElement("div");i.setAttribute("id","deck"),d.appendChild(i);let l=r+1;for(let a=0;a<=o.length-1;a+=1)l>=o.length&&(l=0),0===a?n.createCard(i,`https://openweathermap.org/img/wn/${t.data.current.weather[0].icon}.png`,t.data.current.weather[0].description,`Today:<br><span dataTemp>${(t.data.current.temp-273.15).toFixed(0)}</span>°<span dataletter>${e}</span>`):(n.createCard(i,`https://openweathermap.org/img/wn/${t.data.daily[a].weather[0].icon}.png`,t.data.daily[a].weather[0].description,`${o[l]}:<br><span datatemp>${(t.data.daily[a].temp.min-273.15).toFixed(0)}</span> to <span datatemp>${(t.data.daily[a].temp.max-273.15).toFixed(0)}</span>°<span dataletter>${e}</span>`),l+=1);c.addEventListener("click",(()=>{const t=document.querySelectorAll("[dataletter]");document.querySelectorAll("[datatemp]").forEach((t=>{const a=t,n=parseInt(a.innerText,10);a.innerText="C"===e?(1.8*n+32).toFixed(0):(5/9*(n-32)).toFixed(0)})),e="C"===e?"F":"C",t.forEach((t=>{t.innerText=e}))}))}}n.default(d),document.querySelector("#geo-button").addEventListener("click",(()=>{t.getCoords(),c()}))})();