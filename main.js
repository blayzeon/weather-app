(()=>{"use strict";const e={data:{lat:"0",lon:"0"},weatherFromPromise(t){e.data.current=t.current,e.data.hourly=t.hourly,e.data.daily=t.daily},async createWeatherPromise(){const t=`https://api.openweathermap.org/data/2.5/onecall?lat=${e.data.lat}&lon=${e.data.lon}&exclude=minutely,alerts&appid=c937e56c43bbfbd7edd24a3aa2b5a7a0`;try{const a=await fetch(t,{mode:"cors"}),n=await a.json();return e.weatherFromPromise(n)}catch(e){return e}},setCoords(t){e.data.lat=t.coords.latitude,e.data.lon=t.coords.longitude,e.createWeatherPromise()},getCoords(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e.setCoords)}},t=e,a={default(e){const t=document.createElement("div");t.setAttribute("id","default-container"),t.classList.add("polka-dot");const a=document.createElement("h1");a.innerText="Weather App";const n=document.createElement("h4");n.innerText="Created using Geolocation and OpenWeather API";const d=document.createElement("button");d.innerText="Get Location",d.setAttribute("id","geo-button"),t.appendChild(a),t.appendChild(n),t.appendChild(d),e.appendChild(t)},clearNodesFrom(e){for(;e.firstChild;)e.removeChild(e.lastChild)},createCard(e,t,a,n,d){const r=document.createElement("div");r.classList.add(d),r.classList.add("card");const o=document.createElement("img");o.setAttribute("src",t),o.setAttribute("alt",a);const i=document.createElement("h4");i.innerText=a;const c=document.createElement("p");c.innerHTML=n,r.appendChild(o),r.appendChild(i),r.appendChild(c),e.appendChild(r)}},n=a,d=(new Date).getDay(),r=["Sunday","Monday","Tueday","Wednesday","Thursday","Friday","Saturday"],o=document.querySelector("#container");n.default(o);const i=document.querySelector("#geo-button");function c(){let e="C";const a=setTimeout(c,3e3);if("0"!==t.data.lat){clearTimeout(a),n.clearNodesFrom(o);const i=document.createElement("button");i.setAttribute("id","controller"),i.innerHTML=`Toggle Temp 째<span dataletter>${e}</span>`,o.appendChild(i);const c=document.createElement("div");c.setAttribute("id","deck"),o.appendChild(c);let l=d+1;for(let a=0;a<=r.length-1;a+=1)l>=r.length&&(l=0),0===a?n.createCard(c,`img/${t.data.current.weather[0].main}.svg`,t.data.current.weather[0].description,`Today:<br><span dataTemp>${(t.data.current.temp-273.15).toFixed(0)}</span>째<span dataletter>${e}</span>`,t.data.current.weather[0].main):(n.createCard(c,`img/${t.data.daily[a].weather[0].main}.svg`,t.data.daily[a].weather[0].description,`${r[l]}:<br><span datatemp>${(t.data.daily[a].temp.min-273.15).toFixed(0)}</span>째 to <span datatemp>${(t.data.daily[a].temp.max-273.15).toFixed(0)}</span>째<span dataletter>${e}</span>`,t.data.daily[a].weather[0].main),l+=1);i.addEventListener("click",(()=>{const t=document.querySelectorAll("[dataletter]");document.querySelectorAll("[datatemp]").forEach((t=>{const a=t,n=parseInt(a.innerText,10);a.innerText="C"===e?(1.8*n+32).toFixed(0):(5/9*(n-32)).toFixed(0)})),e="C"===e?"F":"C",t.forEach((t=>{t.innerText=e}))}))}}t.getCoords(),i.addEventListener("click",(()=>{"0"!==t.data.lat||t.getCoords(),c()}))})();